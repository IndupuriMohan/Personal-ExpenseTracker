{% extends "base.html" %}
{% block title %}Transaction History{% endblock %}
{% block content %}
<h1>Transaction History</h1>

<div class="filter-section">
    <form method="GET" action="{{ url_for('transactions') }}" class="filter-form">
        <input type="text" name="search" placeholder="Search by description..." 
               value="{{ request.args.get('search', '') }}">
        <select name="category">
            <option value="all">All Categories</option>
            <option value="groceries">Groceries</option>
            <option value="utilities">Utilities</option>
            <option value="entertainment">Entertainment</option>
            <option value="transportation">Transportation</option>
            <option value="clothing">Clothing</option>
            <option value="healthcare">Healthcare</option>
            <option value="Income">Income</option>
            <option value="others">Others</option>
        </select>
        <button type="submit" class="btn btn-primary">Filter</button>
    </form>
</div>

<div class="table-section">
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Type</th>
                <th>Category</th>
                <th>Details</th>
                <th>Amount</th>
            </tr>
        </thead>
        <tbody>
            {% for trans in transactions %}
            <tr>
                <td>{{ trans.date }}</td>
                <td>
                    <span class="badge badge-{% if trans.type == 'income' %}success{% else %}danger{% endif %}">
                        {{ trans.type }}
                    </span>
                </td>
                <td>{{ trans.category }}</td>
                <td>{{ trans.details or '-' }}</td>
                <td class="{% if trans.type == 'income' %}income-color{% else %}expense-color{% endif %}">
                    {% if trans.type == 'income' %}+{% else %}-{% endif %}â‚¹{{ "%.2f"|format(trans.amount) }}
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5">No transactions found</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}